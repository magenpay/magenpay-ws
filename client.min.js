!function(){if(window.magenpayNotifierInitialized)return;window.magenpayNotifierInitialized=!0;const e=document.currentScript;if(!e)return void console.error("Magenpay Notifier: Unable to find script tag.");const t={userId:e.getAttribute("data-user-id"),merchantId:e.getAttribute("data-merchant-uuid"),position:e.getAttribute("data-position")||"top-right",socketUrl:"wss://socket.magenpay.com"};if(t.userId&&t.merchantId){class e{constructor(e){this.config=e,this.container=null,this.injectStyles(),this.createContainer(),this.connect()}injectStyles(){const e=document.createElement("style");e.innerHTML='\n                .magenpay-notifier-container {\n                    position: fixed; z-index: 9999; width: 320px;\n                    max-width: 90%; display: flex; flex-direction: column; gap: 10px;\n                }\n                .magenpay-notifier-container.top-right { top: 20px; right: 20px; }\n                .magenpay-notifier-container.top-left { top: 20px; left: 20px; }\n                .magenpay-notifier-container.bottom-right { bottom: 20px; right: 20px; }\n                .magenpay-notifier-container.bottom-left { bottom: 20px; left: 20px; }\n                .magenpay-notification {\n                    background-color: #ffffff; color: #333; border-radius: 8px;\n                    padding: 16px; box-shadow: 0 4px 12px rgba(0,0,0,0.15);\n                    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;\n                    animation: magenpay-fade-in 0.5s ease; opacity: 1;\n                    transition: opacity 0.5s ease, transform 0.5s ease;\n                    transform: translateX(0);\n                }\n                .magenpay-notification.closing { opacity: 0; transform: translateX(100%); }\n                .magenpay-notification-title { font-weight: bold; margin-bottom: 8px; font-size: 16px; }\n                .magenpay-notification-body { font-size: 14px; line-height: 1.4; }\n                @keyframes magenpay-fade-in {\n                    from { opacity: 0; transform: translateY(20px); }\n                    to { opacity: 1; transform: translateY(0); }\n                }',document.head.appendChild(e)}createContainer(){this.container=document.createElement("div"),this.container.className=`magenpay-notifier-container ${this.config.position}`,document.body.appendChild(this.container)}connect(){console.log(`Magenpay Notifier: Connecting for user ${this.config.userId} of merchant ${this.config.merchantId}`);const e=new WebSocket(this.config.socketUrl);e.onopen=()=>{console.log("Magenpay Notifier: Connection established."),e.send(JSON.stringify({type:"register",userId:this.config.userId,merchantId:this.config.merchantId}))},e.onmessage=e=>{try{const t=JSON.parse(e.data);if(window.MagenpayNotifierCallbacks&&"function"==typeof window.MagenpayNotifierCallbacks.onMessage){if(!1===window.MagenpayNotifierCallbacks.onMessage(t))return}this.displayNotification(t)}catch(e){console.error("Magenpay Notifier: Error parsing message from server",e)}},e.onclose=()=>{console.log("Magenpay Notifier: Connection closed. Reconnecting in 5 seconds..."),setTimeout(()=>this.connect(),5e3)},e.onerror=t=>{console.error("Magenpay Notifier: WebSocket error",t),e.close()}}displayNotification(e){if(!e.title||!e.body)return;const t=document.createElement("div");t.className="magenpay-notification";const n=document.createElement("div");n.className="magenpay-notification-title",n.textContent=e.title;const i=document.createElement("div");i.className="magenpay-notification-body",i.textContent=e.body,t.appendChild(n),t.appendChild(i),this.container.appendChild(t),setTimeout(()=>{t.classList.add("closing"),setTimeout(()=>{t.remove()},500)},5e3)}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>new e(t)):new e(t)}else console.error("Magenpay Notifier: Please specify 'data-user-id' and 'data-merchant-uuid' in script tag")}();